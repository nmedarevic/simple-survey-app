scalar JSON

directive @auth(requires: Role) on FIELD_DEFINITION

type Survey {
  id: ID!
  schema: JSON!
  version: String!
}


type User {
  id: ID!
  email: String!
  role: Role!
}

enum Role { 
  RESPONDER 
  REVIEWER 
}

type Submission {
  id: ID!
  userId: ID!
  submittedAt: String!
  data: JSON!
}

type Query {
  me: User @auth
  survey: Survey!
  mySubmissions: [Submission!]! @auth(requires: RESPONDER)
  allSubmissions: [Submission!]! @auth(requires: REVIEWER)
}

type Mutation {
  login(email: String!, password: String!): String!
  submitSurvey(survey_id: String!, data: JSON!): Submission! @auth(requires: RESPONDER)
}